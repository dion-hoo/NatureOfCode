<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
        <style>
            canvas {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: #000;
            }
        </style>

        <script src="/p5.min.js"></script>
    </head>
    <body>
        <script>
            let weight = 2;
            let c = 0;
            function setup() {
                createCanvas(windowWidth, windowHeight);

                stroke('#fff');
                strokeWeight(weight);
                noFill();

                background('#000');

                for (let i = 0; i < 10; i++) {
                    const len = random(100, 120);
                    const l = random(30, 50);
                    const r = random(30, 50);

                    createTree(len, l, r, random(100, width - 100), height);
                }
            }

            function mousePressed() {
                const len = random(100, 140);
                const l = random(30, 50);
                const r = random(30, 50);

                createTree(len, l, r);
            }

            function createTree(len, l, r, width, height) {
                push();
                translate(width, height);
                branch(len, l, r);
                pop();
            }

            function branch(h, l, r) {
                weight *= 0.9;
                strokeWeight(weight);

                c += 30;
                if (c > 255) {
                    c %= 255;
                }
                stroke(120, c, 0);

                line(0, 0, 0, -h);
                translate(0, -h);

                if (weight < 1) {
                    weight = 1;
                }

                if (h > 3) {
                    const thetaLeft = random(radians(int(random(l, r))));
                    const thetaRight = random(radians(int(random(l, r))));

                    h *= random(0.66, 0.78);

                    push();
                    rotate(thetaLeft);
                    branch(h, l, r);
                    pop();

                    push();
                    rotate(-thetaRight);
                    branch(h, l, r);
                    pop();
                }
            }
        </script>
    </body>
</html>
